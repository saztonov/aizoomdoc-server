# Аннотация для тендера: аудит и доработка портала RD + AIZoomDoc

## Контекст
Есть два взаимосвязанных решения для работы со строительной/технической документацией (PDF), **оба решения уже находятся в рабочем состоянии** (не “разработка с нуля”):
- есть **работоспособные серверные компоненты**;
- настроены **фоновые процессы/обработка очередей** для длительных операций (обработка документов, OCR/распознавание, генерация артефактов и т.п.);
- есть сформированный pipeline подготовки → анализа.

- **Контур подготовки (RD)**: пользователь размечает PDF (блоки TEXT/TABLE/IMAGE, комментарии/группы), запускает OCR/распознавание, получает подготовленные артефакты (MD/HTML/JSON + кропы/изображения).
- **Контур анализа (AIZoomDoc)**: принимает подготовленные артефакты (MD/HTML) и, с помощью LLM (Gemini), отвечает на вопросы, запрашивая при необходимости изображения и zoom‑фрагменты.

Цель — **единый web‑портал** для функционала обоих контуров, с последующим **аудитом кода, исправлением дефектов, оптимизацией архитектуры и реализацией улучшений**.

## Цель тендера
Найти подрядчика, который:

- проведёт **техническое обследование и code review** двух решений;
- выявит дефекты и архитектурные риски, предложит и согласует план исправлений;
- реализует согласованные исправления/улучшения и доведёт решения до production‑качества (в рамках поэтапной дорожной карты);
- обеспечит **гарантийный период** после внедрения (поддержка по SLA — опционально отдельным этапом).

## Целевая архитектура (на уровне принципов)
- **Единый web‑frontend** (портал).
- **Единый BFF/API Gateway** для фронта (маршрутизация, авторизация, агрегирование данных).
- **Два независимых backend‑сервиса**:
  - **RD‑prep service**: подготовка документации (разметка, OCR, артефакты, управление задачами).
  - **AIZoomDoc‑analyze service**: чат/LLM‑анализ, поиск, запрос изображений/zoom, хранение истории.

## Ожидаемый объём работ (укрупнённо)
### 1) Discovery / аудит
- Обзор архитектуры, зависимостей, границ модулей.
- Анализ форматов данных между контурами (MD/HTML/JSON/изображения), выявление несовместимостей.
- Code review: качество кода, безопасность, производительность, тестируемость, наблюдаемость.
- Риск‑анализ и рекомендации по целевой архитектуре (ADR).
  - Отдельно: оценка текущей **очереди/воркеров** и рекомендации по масштабированию/устойчивости без ухудшения существующей производительности.

### 2) Реализация улучшений
- Исправление дефектов и техдолга по приоритетам.
- Доведение MVP AIZoomDoc (client‑server) до полнофункционального состояния (tool calls, поиск, обработка изображений/zoom, streaming, безопасность).
- Перенос RD‑клиента в web (UI/UX, инструменты разметки, интеграция OCR/автосегментации, экспорт результатов).
- Интеграция в единый портал (BFF, общая авторизация, единые сущности проектов/документов/пользователей).

### 3) Hardening
- Безопасность (секреты, ключи, изоляция, политика доступа).
- Производительность и масштабирование (фоновые задачи, очереди, кэширование).
- Наблюдаемость (логи, метрики, трассировка, алерты).
- Автотесты (unit/integration/e2e на критические сценарии).
- Документация (API, деплой, эксплуатация).

## Основные интеграции и стек (ориентир)
- **LLM**: Google Gemini (per‑user ключи, управление промптами).
- **Хранилище**: S3/R2‑совместимое Object Storage (артефакты, изображения, кропы).
- **БД**: Supabase/PostgreSQL (пользователи/чаты/настройки/промпты; отдельная projects DB read‑only).
- **OCR/распознавание** (в RD): локальный VLM (OpenAI‑совместимый API), Chandra OCR, внешняя автосегментация (Datalab API) и/или локальный Marker.

## Требуемые компетенции подрядчика
- Web‑frontend: сложные интерфейсы (canvas/overlay для PDF), UX для разметки.
- Backend: Python/FastAPI (или эквивалент), проектирование API, фоновые задачи/очереди, работа с файлами/объектным хранилищем.
- Data/Docs: обработка PDF/изображений, кропы/viewport/zoom, координатные преобразования.
- LLM: интеграция Gemini, промпт‑инжиниринг, tool calls, контроль стоимости/качества, защита от “галлюцинаций”.
- DevOps: конфигурация окружений, секреты, CI/CD, наблюдаемость.

## Артефакты и критерии приёмки (для тендера)
Подрядчик должен предоставить:

- **Отчёт аудита**: список проблем с приоритетом (severity/impact), воспроизводимость, рекомендации.
- **ADR/архитрешения**: целевой дизайн (2 сервиса + BFF), обоснование, план миграции.
- **Backlog/roadmap**: задачи, оценки трудоёмкости, зависимости, этапы.
- **Реализация**: исправления и улучшения по согласованному backlog.
- **Тесты и качество**: покрытие критических сценариев, статический анализ, регресс.
- **Документация**: API‑контракты, инструкции деплоя/эксплуатации, описание форматов данных.

Приёмка производится по чек‑листам и демонстрации сценариев, описанных в ТЗ (`TOR_RD_AIZoomDoc_Portal.md`).

## Гарантийные условия
- Гарантийный период устранения дефектов после сдачи этапа: **30–90 дней** (точное значение фиксируется в договоре).


